#include "shell.h"

/**
 * shecktar_getline - Custom getline implementation
 * @input: buffer to store the input line
 * @buffer_size: size of buffer
 * Return: the input string on success and NULL on failure or end of file
 */
char *shecktar_getline(char *input, size_t buffer_size, FILE *folder)
{
    static size_t idx, len;
    ssize_t elements_read;
    char *new_buffer = NULL, *newline_char_ptr;
    size_t newline;

    elements_read = read(STDIN_FILENO, input, buffer_size);
    if (elements_read == -1 || (elements_read == 0 && buffer_size == 0))
        return (NULL);

    newline_char_ptr = strchr(input + idx, '\n');
    newline = newline_char_ptr ? 1 + (size_t)(newline_char_ptr - input) : buffer_size;

    new_buffer = realloc(input, buffer_size ? buffer_size + newline : newline + 1);
    if (!new_buffer)
    {
        free(input);
        return (NULL);
    }

    strncpy(new_buffer, input + idx, newline - idx + 1);
    len += newline - idx;
    idx = newline;
    input = new_buffer;

    return (input);
}
